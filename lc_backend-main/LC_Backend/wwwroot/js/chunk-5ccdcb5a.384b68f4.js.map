{"version":3,"sources":["webpack:///./src/views/DischargeSummary/CreateDischargeSummary.vue","webpack:///./src/views/DischargeSummary/CreateDischargeSummary.vue?d9c5","webpack:///./src/views/DischargeSummary/CreateDischargeSummary.vue?5d3e"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","$data","title","date","_hoisted_3","_hoisted_4","id","name","given","family","_hoisted_6","_hoisted_7","_hoisted_8","birthDate","_hoisted_9","_hoisted_10","_hoisted_11","gender","_hoisted_12","_hoisted_13","_hoisted_14","telecom","value","_hoisted_15","_hoisted_16","_hoisted_17","address","line","city","_Fragment","section","key","text","div","_hoisted_19","onClick","$options","data","patient","composition","resourceType","type","coding","system","code","display","subject","this","$route","params","Date","author","$getUserId","$getUserEmail","carePlan","status","intent","category","description","activity","beforeCreate","$redirectNotAuthorizedToLogin","fetch","$apiUrl","credentials","then","response","json","console","log","newActivity","detail","reasonReference","performer","generalPractitioner","push","methods","submitDischargeSummary","postRequest","method","headers","body","JSON","stringify","async","ok","createCarePlan","error","message","Promise","reject","catch","window","location","href","__exports__","render"],"mappings":"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","file":"js/chunk-5ccdcb5a.384b68f4.js","sourcesContent":["<script>\r\nexport default {\r\n    name: \"CreateDischargeSummary\",\r\n    data() {\r\n        return {\r\n            patient: {},\r\n            composition: {\r\n                resourceType: \"Composition\",\r\n                type: {\r\n                    coding: [\r\n                        {\r\n                            system: \"http://loinc.org\",\r\n                            code: \"18842-5\",\r\n                            display: \"Discharge Summary\",\r\n                        },\r\n                    ],\r\n                    text: \"Entlassungsbrief\",\r\n                },\r\n                subject: {\r\n                    id: this.$route.params.id,\r\n                },\r\n                date: new Date(),\r\n                author: [\r\n                    {\r\n                        \"id\": this.$getUserId(),\r\n                        \"display\": this.$getUserEmail()\r\n                    }\r\n                ],\r\n                title: \"Entlassungsbrief\",\r\n                section: [\r\n                    // use sections as recommended -> https://loinc.org/18842-5/\r\n                    {\r\n                        title: \"Aufnahmegrund\",\r\n                        code: {\r\n                            coding: [\r\n                                {\r\n                                    system: \"http://loinc.org\",\r\n                                    code: \"29299-5\",\r\n                                    display: \"Reason for visit Narrative\",\r\n                                },\r\n                            ],\r\n                        },\r\n                        text: {\r\n                            div: \"\"\r\n                        },\r\n                    },\r\n                    {\r\n                        title: \"Diagnose bei Entlassung\",\r\n                        code: {\r\n                            coding: [\r\n                                {\r\n                                    system: \"http://loinc.org\",\r\n                                    code: \"78375-3\",\r\n                                    display: \"Discharge diagnosis Narrative\",\r\n                                },\r\n                            ],\r\n                        },\r\n                        text: {\r\n                            div: \"\"\r\n                        },\r\n                    },\r\n                    {\r\n                        title: \"Durchgeführte Maßnahmen\",\r\n                        code: {\r\n                            coding: [\r\n                                {\r\n                                    system: \"http://loinc.org\",\r\n                                    code: \"8648-8\",\r\n                                    display: \"Hospital course Narrative\",\r\n                                },\r\n                            ],\r\n                        },\r\n                        text: {\r\n                            div: \"\"\r\n                        },\r\n                    },\r\n                    {\r\n                        title: \"Empfohlene Medikation\",\r\n                        code: {\r\n                            coding: [\r\n                                {\r\n                                    system: \"http://loinc.org\",\r\n                                    code: \"75311-1\",\r\n                                    display: \"Discharge medications Narrative\",\r\n                                },\r\n                            ],\r\n                        },\r\n                        text: {\r\n                            div: \"\"\r\n                        },\r\n                    },\r\n                    {\r\n                        title: \"Weitere empfohlene Maßnahmen\",\r\n                        code: {\r\n                            coding: [\r\n                                {\r\n                                    system: \"http://loinc.org\",\r\n                                    code: \"18776-5\",\r\n                                    display: \"Plan of care\",\r\n                                },\r\n                            ],\r\n                        },\r\n                        text: {\r\n                            div: \"\"\r\n                        },\r\n                    },\r\n                    {\r\n                        title: \"Zusammenfassung des Aufenthalts\",\r\n                        code: {\r\n                            coding: [\r\n                                {\r\n                                    system: \"http://loinc.org\",\r\n                                    code: \"34105-7\",\r\n                                    display: \"Hospital Discharge summary\",\r\n                                },\r\n                            ],\r\n                        },\r\n                        text: {\r\n                            div: \"\"\r\n                        },\r\n                    },\r\n                    {\r\n                        title: \"Allergien, Unverträglichkeiten und Risiken\",\r\n                        code: {\r\n                            coding: [\r\n                                {\r\n                                    system: \"http://loinc.org\",\r\n                                    code: \"48765-2\",\r\n                                    display: \"Allergies\",\r\n                                },\r\n                            ],\r\n                        },\r\n                        text: {\r\n                            div: \"\"\r\n                        },\r\n                    },\r\n                    {\r\n                        title: \"Vitalparameter\",\r\n                        code: {\r\n                            coding: [\r\n                                {\r\n                                    system: \"http://loinc.org\",\r\n                                    code: \"8716-3\",\r\n                                    display: \"Vital signs\",\r\n                                },\r\n                            ],\r\n                        },\r\n                        text: {\r\n                            div: \"\"\r\n                        },\r\n                    },\r\n                    {\r\n                        title: \"Anamnese\",\r\n                        code: {\r\n                            coding: [\r\n                                {\r\n                                    system: \"http://loinc.org\",\r\n                                    code: \"42347-5\",\r\n                                    display: \"Admission diagnosis (narrative)\",\r\n                                },\r\n                            ],\r\n                        },\r\n                        text: {\r\n                            div: \"\"\r\n                        },\r\n                    },\r\n                    {\r\n                        title: \"Frühere Erkrankungen\",\r\n                        code: {\r\n                            coding: [\r\n                                {\r\n                                    system: \"http://loinc.org\",\r\n                                    code: \"47519-4\",\r\n                                    display: \"History of Procedures Document\",\r\n                                },\r\n                            ],\r\n                        },\r\n                        text: {\r\n                            div: \"\"\r\n                        },\r\n                    },\r\n                    {\r\n                        title: \"Medikation bei Einweisung\",\r\n                        code: {\r\n                            coding: [\r\n                                {\r\n                                    system: \"http://loinc.org\",\r\n                                    code: \"42346-7\",\r\n                                    display: \"Medications on admission (narrative)\",\r\n                                },\r\n                            ],\r\n                        },\r\n                        text: {\r\n                            div: \"\"\r\n                        },\r\n                    },\r\n                ],\r\n            },\r\n            carePlan: {\r\n                resourceType: \"CarePlan\",\r\n                text: {\r\n                    status: \"generated\",\r\n                    div: \"Care Plan\"\r\n                },\r\n                subject: {\r\n                    id: this.$route.params.id // patientId\r\n                },\r\n                status: \"active\",\r\n                intent: \"order\",\r\n                category: [\r\n                    {\r\n                        text: \"Prescription\"\r\n                    }\r\n                ],\r\n                description: \"Prescription\",\r\n                activity: [\r\n                    \r\n                ]\r\n            }\r\n        };\r\n    },\r\n    beforeCreate() {\r\n        this.$redirectNotAuthorizedToLogin([1]);\r\n\r\n        fetch( `${this.$apiUrl}/Patient/` + this.$route.params.id, {\r\n                credentials: 'include',\r\n            }\r\n        )\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n                this.patient = data\r\n                console.log(this.carePlan)\r\n                let newActivity = {\r\n                        detail: {\r\n                            code: {\r\n                                coding: [\r\n                                    {\r\n                                        system: \"http://snomed.info/sct\",\r\n                                        code: \"16076005\",\r\n                                        display: \"Prescription\"\r\n                                    }\r\n                                ],\r\n                                text: \"Prescription\"\r\n                            },\r\n                            status: \"not-started\",\r\n                            reasonReference: [\r\n                                {\r\n                                    id: \"\" // set after composition/dischargeSummary is created -> composition/dischargeSummary Id\r\n                                }\r\n                            ],\r\n                            performer: [\r\n                                {\r\n                                    id: this.patient.generalPractitioner[0].id\r\n                                }\r\n                            ]\r\n                        }\r\n                    }\r\n                this.carePlan.activity.push(newActivity);\r\n                console.log(this.carePlan)\r\n            })\r\n    },\r\n    methods: {\r\n        submitDischargeSummary() {\r\n            const postRequest = {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify(this.composition),\r\n                credentials: 'include',\r\n            }\r\n            fetch(`${this.$apiUrl}/Composition`, postRequest)\r\n                .then(async response => {\r\n                    const data = await response.json();\r\n\r\n                    if (!response.ok) {\r\n                        const error = (data && data.message) || response.status;\r\n                        console.log(Promise.reject(error));\r\n                    }\r\n                    else if (data != null) {\r\n                        console.log(data);\r\n                        this.carePlan.activity[0].detail.reasonReference[0].id = data.id;\r\n                        this.createCarePlan();\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error(\"Error\", error);\r\n                })\r\n        },\r\n        createCarePlan() {\r\n            const postRequest = {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify(this.carePlan),\r\n                credentials: 'include',\r\n            };\r\n            console.log(\"[INFO] Create carePlan\")\r\n            fetch(`${this.$apiUrl}/CarePlan`, postRequest)\r\n                .then(async response => {\r\n                    const data = await response.json();\r\n\r\n                    if (!response.ok) {\r\n                        const error = (data && data.message) || response.status;\r\n                        console.log(Promise.reject(error));\r\n                    }\r\n                    else if (data != null) {\r\n                        console.log(data);\r\n                        window.location.href = \"/patient/\" + this.$route.params.id;\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error(\"Error\", error);\r\n                })\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<template>\r\n    <div class=\"card w-75\">\r\n        <div class=\"card-header\">\r\n            <h2>{{ composition.title }}</h2>\r\n            <p>{{ composition.date }}</p>\r\n        </div>\r\n        <ul class=\"list-group list-group-flash\">\r\n            <li class=\"list-group-item\">\r\n                <div v-if=\"patient.id != null && patient.name[0] != null\">\r\n                    <h5>\r\n                        {{ patient.name[0].given + \" \" + patient.name[0].family }}\r\n                    </h5>\r\n                    <div class=\"form-group row\">\r\n                        <div class=\"col-md-3\"><b>Geburtstag</b></div>\r\n                        <div class=\"col-md-9\">{{ patient.birthDate }}</div>\r\n                    </div>\r\n                    <div class=\"form-group row\">\r\n                        <div class=\"col-md-3\"><b>Geschlecht</b></div>\r\n                        <div class=\"col-md-9\">{{ patient.gender }}</div>\r\n                    </div>\r\n                    <div class=\"form-group row\">\r\n                        <div class=\"col-md-3\"><b>Tel. Nr.</b></div>\r\n                        <div class=\"col-md-9\">{{ patient.telecom[0].value }}</div>\r\n                    </div>\r\n                    <div class=\"form-group row\">\r\n                        <div class=\"col-md-3\"><b>Adresse</b></div>\r\n                        <div class=\"col-md-9\">\r\n                            {{ patient.address[0].line[0] + \", \" + patient.address[0].city }}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <li v-for=\"section in composition.section\" :key=\"section\" class=\"list-group-item\">\r\n                <h5>{{ section.title }}</h5>\r\n                <textarea v-model=\"section.text.div\" class=\"form-control\"></textarea>\r\n            </li>\r\n            <li class=\"list-group-item\">\r\n                <button class=\"btn btn-success\" @click=\"submitDischargeSummary\">Erstellen</button>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</template>\r\n\r\n<style scoped>\r\n.card {\r\n    text-align: left;\r\n    margin: 2em 1em;\r\n}\r\n\r\n.card-header {\r\n    padding: 3em;\r\n}\r\n\r\nli {\r\n    padding: 2em;\r\n}\r\n</style>\r\n","import { render } from \"./CreateDischargeSummary.vue?vue&type=template&id=ab3bed0a&scoped=true\"\nimport script from \"./CreateDischargeSummary.vue?vue&type=script&lang=js\"\nexport * from \"./CreateDischargeSummary.vue?vue&type=script&lang=js\"\n\nimport \"./CreateDischargeSummary.vue?vue&type=style&index=0&id=ab3bed0a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Dev\\\\Web\\\\FHTW-INNO-LinkedCareWebClient\\\\web-client\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ab3bed0a\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./CreateDischargeSummary.vue?vue&type=style&index=0&id=ab3bed0a&scoped=true&lang=css\""],"sourceRoot":""}
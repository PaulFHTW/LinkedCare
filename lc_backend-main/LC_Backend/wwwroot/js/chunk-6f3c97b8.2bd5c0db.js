(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f3c97b8"],{"0f03":function(t,e,a){"use strict";var n=a("7a23");const i=["href","title"];function s(t,e,a,s,l,c){const o=Object(n["B"])("router-link"),r=Object(n["B"])("routerLink"),b=Object(n["B"])("paginate");return Object(n["t"])(),Object(n["f"])(n["a"],null,[Object(n["g"])("table",{class:Object(n["p"])(["table",l.tableContent.settings.tableClasses])},[Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[(Object(n["t"])(!0),Object(n["f"])(n["a"],null,Object(n["z"])(l.tableContent.settings.tableColumns,t=>(Object(n["t"])(),Object(n["f"])("th",{key:t.field,scope:"col",class:Object(n["p"])([t.align,t.colSize])},Object(n["E"])(t.name),3))),128))])]),Object(n["g"])("tbody",null,[(Object(n["t"])(!0),Object(n["f"])(n["a"],null,Object(n["z"])(l.tableContent.result,t=>(Object(n["t"])(),Object(n["f"])("tr",{key:t.id},[(Object(n["t"])(!0),Object(n["f"])(n["a"],null,Object(n["z"])(t,(t,e)=>(Object(n["t"])(),Object(n["f"])(n["a"],{key:JSON.stringify(t)},[0==e?(Object(n["t"])(),Object(n["f"])("th",{key:0,scope:"row",class:Object(n["p"])([l.tableContent.settings.tableColumns[e].align,l.tableContent.settings.tableColumns[e].color,l.tableContent.settings.tableColumns[e].weight,l.tableContent.settings.tableColumns[e].colSize])},[Object(n["i"])(o,{to:"/"+l.tableContent.settings.tableColumns[e].type+"/"+t},{default:Object(n["I"])(()=>[Object(n["h"])(Object(n["E"])(t),1)]),_:2},1032,["to"])],2)):Object(n["e"])("",!0),0!=e?(Object(n["t"])(),Object(n["f"])("td",{key:JSON.stringify(t),class:Object(n["p"])([l.tableContent.settings.tableColumns[e].align,l.tableContent.settings.tableColumns[e].color,l.tableContent.settings.tableColumns[e].weight,l.tableContent.settings.tableColumns[e].colSize])},[c.isLink(l.tableContent.settings.tableColumns[e])?(Object(n["t"])(),Object(n["f"])("a",{key:0,href:l.tableContent.settings.tableColumns[e].hrefPrefix+t.href+l.tableContent.settings.tableColumns[e].hrefSuffix,title:l.tableContent.settings.tableColumns[e].titlePrefix+t.title+l.tableContent.settings.tableColumns[e].titleSuffix},Object(n["E"])(l.tableContent.settings.tableColumns[e].textPrefix)+Object(n["E"])(t.text)+Object(n["E"])(l.tableContent.settings.tableColumns[e].textSuffix),9,i)):c.isRouter(l.tableContent.settings.tableColumns[e])&&null!=t.href?(Object(n["t"])(),Object(n["d"])(r,{key:1,class:"text-decoration-none notnull",to:l.tableContent.settings.tableColumns[e].hrefPrefix+t.href+l.tableContent.settings.tableColumns[e].hrefSuffix},{default:Object(n["I"])(()=>[Object(n["h"])(Object(n["E"])(l.tableContent.settings.tableColumns[e].textPrefix)+Object(n["E"])(t.text)+Object(n["E"])(l.tableContent.settings.tableColumns[e].textSuffix),1)]),_:2},1032,["to"])):c.isRouter(l.tableContent.settings.tableColumns[e])&&null==t.href?(Object(n["t"])(),Object(n["d"])(r,{key:2,class:"text-decoration-none null",to:l.tableContent.settings.tableColumns[e].nullHref},{default:Object(n["I"])(()=>[Object(n["h"])(Object(n["E"])(l.tableContent.settings.tableColumns[e].nullText),1)]),_:2},1032,["to"])):c.isDate(l.tableContent.settings.tableColumns[e])?(Object(n["t"])(),Object(n["f"])(n["a"],{key:3},[Object(n["h"])(Object(n["E"])(c.formatDate(t)),1)],64)):c.isExternalData(l.tableContent.settings.tableColumns[e])?(Object(n["t"])(),Object(n["f"])(n["a"],{key:4},[Object(n["h"])(Object(n["E"])(c.getExternalData(l.tableContent.settings.tableColumns[e],t)),1)],64)):(Object(n["t"])(),Object(n["f"])(n["a"],{key:5},[Object(n["h"])(Object(n["E"])(t),1)],64))],2)):Object(n["e"])("",!0)],64))),128))]))),128))])],2),1==a.pagination?(Object(n["t"])(),Object(n["d"])(b,{key:0,modelValue:l.page,"onUpdate:modelValue":e[0]||(e[0]=t=>l.page=t),"page-count":l.pageCount,"click-handler":c.clickCallback,"prev-text":"Prev","next-text":"Next","container-class":"pagination","page-class":"page-item"},null,8,["modelValue","page-count","click-handler"])):Object(n["e"])("",!0)],64)}a("14d9");var l=a("8857"),c={name:"TableElement",props:{fetchLink:{type:String,required:!0},tableColumns:{type:Object,required:!0},tableClasses:{type:String,required:!0},pagination:{type:Boolean,required:!1}},watch:{fetchLink:function(t,e){console.log("Prop changed: ",t," | was: ",e),this.getList()},page:function(t,e){console.log("value changed: ",t," | was: ",e),1==this.paginationUsed&&this.getList()}},data(){return{tableContent:{loaded:!1,fetchedData:{},result:[],settings:{tableColumns:this.tableColumns,tableClasses:this.tableClasses}},paginationUrl:"",paginationUsed:!1,page:1,pageCount:1}},components:{paginate:l["a"]},methods:{isLink(t){return!!t.isLink},isRouter(t){return!!t.isRouter},isDate(t){return!!t.isDate},isExternalData(t){return!!t.isExternalData},formatDate(t){const e=new Date(t).toLocaleDateString("de-AT",{day:"2-digit",month:"2-digit",year:"numeric"});return e},getList(){const t=this;t.fetchedData={},this.tableContent={loaded:!1,fetchedData:{},result:[],settings:{tableColumns:this.tableColumns,tableClasses:this.tableClasses}};var e="";if(1==this.pagination){var a;if(1!=this.paginationUsed)this.page=parseInt(null!==(a=this.$route.query.page)&&void 0!==a?a:1,10);e=`${t.fetchLink}?page=${this.page}`}else e=this.fetchLink;console.log("Url to fetch: "+e),fetch(e,{credentials:"include"}).then((function(t){return t})).then((function(t){return t.json()})).then((function(e){t.tableContent.fetchedData=e;var a=t.tableContent.fetchedData;for(var n in t.pageCount=Math.ceil(a.total/20),a.entry){var i=[];for(var s of t.tableContent.settings.tableColumns)if(s.isLink||s.isRouter){var l=null,c=null,o=null;"undefined"!==typeof s.titlePath&&(l=t.getInObject(a.entry[n],s.titlePath)),"undefined"!==typeof s.hrefPath&&(c=t.getInObject(a.entry[n],s.hrefPath)),"undefined"!==typeof s.textPath&&(o=t.getInObject(a.entry[n],s.textPath));var r={title:l,href:c,text:o};console.log(r),i.push(r)}else i.push(t.getInObject(a.entry[n],s.path));t.tableContent.result.push(i)}t.tableContent.loaded=!0})).catch((function(t){console.error(t)}))},getExternalData(t,e){if(null==t.data)return console.log("[ERROR] no data passed to collumn "+t.name),"";console.log(t.data);for(const a in t.data)if(console.log(`[INFO] is dataElement.key == element: ${t.data[a].key} =? ${e}`),t.data[a].key==e)return t.data[a].value;return console.log(`[WARNING] data missing in collumn ${t.name} for element ${e}`),"no data"},getInObject(t,e,a){var n=function(t){if("string"!==typeof t)return t;if(t.startsWith("_"))return a=t.substring(1),a;var e=[];return t.split(".").forEach((function(t){t.split(/\[([^}]+)\]/g).forEach((function(t){t.length>0&&e.push(t)}))})),e};e=n(e);for(var i=t,s=0;s<e.length;s++){if(!i[e[s]])return a;i=i[e[s]]}return i},clickCallback:function(t){console.log(t),this.paginationUsed=!0,this.$router.push("patients?page="+t)}},beforeMount(){this.getList(),console.log(this.tableContent)},mounted(){}},o=(a("a4b5"),a("6b0d")),r=a.n(o);const b=r()(c,[["render",s],["__scopeId","data-v-222e8c2c"]]);e["a"]=b},2744:function(t,e,a){"use strict";a("7f07")},"48db":function(t,e,a){},"7f07":function(t,e,a){},a4b5:function(t,e,a){"use strict";a("48db")},a58e:function(t,e,a){"use strict";a.r(e);var n=a("7a23");const i=t=>(Object(n["w"])("data-v-cd1a36a4"),t=t(),Object(n["u"])(),t),s={id:"patient",class:"text-start"},l={class:"row"},c={class:"col-lg-4"},o={class:"sticky pt-7"},r={class:"card card-body text-left mb-3"},b={class:"mb-0 text-muted"},d={class:"mb-3 fw-bold"},u={class:"text-muted"},g={class:"mb-2"},p=i(()=>Object(n["g"])("span",{class:"text-muted"},"Geburtsdatum: ",-1)),m={class:"mb-2"},f=i(()=>Object(n["g"])("span",{class:"text-muted"},"Adresse: ",-1)),h={class:"mb-2"},j=i(()=>Object(n["g"])("span",{class:"text-muted"},"Telefonnummer: ",-1)),O={key:0,class:""},C={type:"button",class:"btn btn-primary"},y=i(()=>Object(n["g"])("span",{class:"align-middle"},"Neues Rezept",-1)),x={key:1,class:""},k={type:"button",class:"btn btn-primary"},v=i(()=>Object(n["g"])("span",{class:"align-middle"},"Neuer Entlassungsbrief",-1)),I={class:"col-lg-8"},D=i(()=>Object(n["g"])("div",{class:"p-4"},[Object(n["g"])("h1",{class:"mb-3 text-center"},"Konsultationsverlauf")],-1)),E={class:"card overflow-hidden mb-4"};function $(t,e,a,i,$,R){const w=Object(n["B"])("vue-feather"),L=Object(n["B"])("router-link"),P=Object(n["B"])("Accordion");return Object(n["t"])(),Object(n["f"])("main",s,[Object(n["g"])("section",null,[Object(n["g"])("div",l,[Object(n["g"])("div",c,[Object(n["g"])("div",o,[Object(n["g"])("div",r,[null!=$.patient.id?(Object(n["t"])(),Object(n["f"])(n["a"],{key:0},[Object(n["g"])("p",b,"ID:"+Object(n["E"])($.patient.id),1),Object(n["g"])("h5",d,[Object(n["h"])(Object(n["E"])($.patient.name[0].given[0]+" "+$.patient.name[0].family),1),Object(n["g"])("span",u," ("+Object(n["E"])($.patient.gender)+")",1)]),Object(n["g"])("p",g,[p,Object(n["h"])(Object(n["E"])(R.formatDate($.patient.birthDate)),1)]),Object(n["g"])("p",m,[f,Object(n["h"])(Object(n["E"])($.patient.address[0].line[0]+", "+$.patient.address[0].city),1)]),Object(n["g"])("p",h,[j,Object(n["h"])(Object(n["E"])($.patient.telecom[0].value),1)])],64)):Object(n["e"])("",!0)]),null!=$.patient.id&&t.$AuthorizedRole([2])?(Object(n["t"])(),Object(n["f"])("div",O,[Object(n["g"])("button",C,[Object(n["i"])(L,{to:"/patient/"+$.patient.id+"/createPrescription"},{default:Object(n["I"])(()=>[Object(n["i"])(w,{class:"align-middle icon-margin",type:"file-plus"}),y]),_:1},8,["to"])])])):Object(n["e"])("",!0),null!=$.patient.id&&t.$AuthorizedRole([1])?(Object(n["t"])(),Object(n["f"])("div",x,[Object(n["g"])("button",k,[Object(n["i"])(L,{to:"/patient/"+$.patient.id+"/createDischargeSummary"},{default:Object(n["I"])(()=>[Object(n["i"])(w,{class:"align-middle icon-margin",type:"file-plus"}),v]),_:1},8,["to"])])])):Object(n["e"])("",!0)])]),Object(n["g"])("div",I,[D,Object(n["g"])("div",E,[Object(n["i"])(P,{AccordionItems:[{_id:"Entlassungsbriefe",authorizedRoles:[1,2,3],headline:"ðŸ“„ Entlassungsbriefe",component:"AccordionItemTable",tableData:{fetchLink:`${this.$apiUrl}/Composition?subject=${this.patientId}&type=18842-5`,tableClasses:"text-start table-striped",tableColumns:[{name:"ID",field:"id",path:"resource.id",align:"text-start",weight:"fw-light",type:`patient/${this.patientId}/discharge-summary`},{name:"Author",field:"beschreibung",path:"resource.author[0].display",align:"text-start"},{name:"Datum",field:"datum",path:"resource.meta.lastUpdated",align:"text-start",color:"text-muted",weight:"",isDate:!0},{name:"Status",field:"status",align:"text-center",color:"text-muted",weight:"",path:"resource.id",isExternalData:!0,data:$.dischargeSummaryStatusList}]}},{_id:"Laufende-Rezepte",authorizedRoles:[1,2,3,4],expanded:$.accordionIsExpanded,headline:"ðŸ“ Laufende Rezepte",component:"AccordionItemTable",tableData:{fetchLink:`${this.$apiUrl}/MedicationRequest?subject=${this.patientId}&status=active`,tableClasses:"text-start table-striped",tableColumns:[{name:"ID",field:"id",path:"resource.id",align:"text-start",weight:"fw-light",type:`patient/${this.patientId}/prescription`},{name:"Medikament",field:"medikament",path:"resource.medicationCodeableConcept.coding[0].display",align:"text-start"},{name:"PrioritÃ¤t",field:"prioritaet",path:"resource.priority",align:"text-center"},{name:"Datum",field:"datum",path:"resource.meta.lastUpdated",align:"text-end",color:"text-muted",isDate:!0}]}},{_id:"Vergangene-Medikation",authorizedRoles:[1,2,3],headline:"ðŸ’Š Vergangene Medikation",component:"AccordionItemTable",tableData:{fetchLink:`${this.$apiUrl}/MedicationRequest?subject=${this.patientId}&status=completed`,tableClasses:"text-start table-striped",tableColumns:[{name:"ID",field:"id",path:"resource.id",align:"text-start",weight:"fw-light",type:`patient/${this.patientId}/prescription`},{name:"Medikament",field:"medikament",path:"resource.medicationCodeableConcept.coding[0].display",align:"text-start"},{name:"PrioritÃ¤t",field:"prioritaet",path:"resource.priority",align:"text-center"},{name:"Datum",field:"datum",path:"resource.meta.lastUpdated",align:"text-end",color:"text-muted",isDate:!0},{name:"Status",field:"status",path:"resource.status",align:"text-center"}]}}]},null,8,["AccordionItems"])])])])])])}a("14d9");const R={class:"accordion"};function w(t,e,a,i,s,l){return Object(n["t"])(),Object(n["f"])("section",R,[(Object(n["t"])(!0),Object(n["f"])(n["a"],null,Object(n["z"])(a.AccordionItems,e=>(Object(n["t"])(),Object(n["f"])(n["a"],{key:e._uid},[t.$AuthorizedRole(e.authorizedRoles)?(Object(n["t"])(),Object(n["d"])(Object(n["C"])(e.component),{key:0,item:e},null,8,["item"])):Object(n["e"])("",!0)],64))),128))])}const L={class:"accordion-item"},P=["id"],S=["data-bs-target","aria-expanded","aria-controls"],A=["id","aria-labelledby"],_={class:"accordion-body table-responsive"};function z(t,e,a,i,s,l){const c=Object(n["B"])("Table");return Object(n["t"])(),Object(n["f"])("div",L,[Object(n["g"])("h2",{class:"accordion-header",id:a.item._id},[Object(n["g"])("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#"+a.item._id+"-collapse","aria-expanded":a.item.expanded?"true":"false","aria-controls":a.item._id+"-collapse"},Object(n["E"])(a.item.headline),9,S)],8,P),Object(n["g"])("div",{id:a.item._id+"-collapse",class:Object(n["p"])([a.item.expanded?"show":"","accordion-collapse","collapse"]),"aria-labelledby":a.item._id},[Object(n["g"])("div",_,[Object(n["i"])(c,{fetchLink:a.item.tableData.fetchLink,tableClasses:a.item.tableData.tableClasses,tableColumns:a.item.tableData.tableColumns},null,8,["fetchLink","tableClasses","tableColumns"])])],10,A)])}var U=a("0f03"),T={name:"AccordionItemTable",components:{Table:U["a"]},props:{item:Object}},M=a("6b0d"),N=a.n(M);const q=N()(T,[["render",z]]);var B=q,V={name:"Accordion",components:{AccordionItemTable:B},props:{AccordionItems:{type:Object,required:!0}}};const J=N()(V,[["render",w]]);var F=J;const G="16076005";var W={name:"Patient",components:{Accordion:F},data(){return{patientId:this.$route.params.id,patient:{},carePlans:{},dischargeSummaryStatusList:[],accordionIsExpanded:!1}},methods:{formatDate(t){const e=new Date(t).toLocaleDateString("de-AT",{day:"2-digit",month:"2-digit",year:"numeric"});return e},getAndfilterCarePlans(){const t=this;console.log(`${this.$apiUrl}/CarePlan?subject=${this.patientId}&activity-code=${G}`),fetch(`${this.$apiUrl}/CarePlan?subject=${this.patientId}&activity-code=${G}`,{credentials:"include"}).then(t=>t.json()).then((function(e){if(console.log(e),null!=e.entry)for(const i of e.entry)if(null!=i.resource.activity)for(const e of i.resource.activity){var a=!1;if(null!=e.detail.code.coding){for(const t of e.detail.code.coding)if(t.code==G){a=!0;break}if(a){console.log("[INFO] Current Activity.detail: "),console.log(e.detail);var n={key:e.detail.reasonReference[0].id,value:e.detail.status};t.dischargeSummaryStatusList.push(n),console.log(`Element added to dischargeSummaryStatusList: ["${e.detail.reasonReference[0].id}, ${e.detail.status}]`)}}else console.log("[ERROR] activity.detailcode.coding == null")}else console.log("[ERROR] carePlan.resource.activity == null");else console.log("[ERROR] this.carePlans.entry == null")}))}},beforeMount(){this.getAndfilterCarePlans(),this.$AuthorizedRole([4])&&(this.accordionIsExpanded=!0)},mounted(){fetch(this.$apiUrl+"/Patient/"+this.patientId,{credentials:"include"}).then(t=>t.json()).then(t=>this.patient=t)}};a("2744");const H=N()(W,[["render",$],["__scopeId","data-v-cd1a36a4"]]);e["default"]=H}}]);
//# sourceMappingURL=chunk-6f3c97b8.2bd5c0db.js.map